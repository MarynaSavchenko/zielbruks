<!DOCTYPE html>
<html lang="en">
<head>
    <title>Calendar Example</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.0/css/bootstrap.min.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.0/js/bootstrap.min.js"></script>

    {% load static %}
    <script src="{% static 'js/daypilot/daypilot-all.min.js' %}" type="text/javascript"></script>

</head>
<body>

<div class="container">

    <div class="jumbotron">
        <form method="POST">
            {% csrf_token %}
            <input type="hidden" name="next" value="{{ next }}">
            {{ form.as_p }}

            <div class="container">
                <input type="submit" value="Choose"/>
            </div>

        </form>
    </div>

    {% if flag %}



        <h2>Schedule for {{ professor }}</h2>

        <div style="float:left; width: 150px;">
            <div id="nav"></div>
        </div>
        <div style="margin-left: 150px;">
            <div id="dp"></div>
        </div>

        <p style="...">
        <div id="details" class="alert alert-info">
            Select an event to show the details.
        </div>
        </p>

        <script type="text/javascript">
            var nav = new DayPilot.Navigator("nav");
            nav.showMonths = 2;
            nav.selectMode = "day";
            nav.startDate = "{{ start_date }}";
            nav.onTimeRangeSelected = function (args) {
                dp.startDate = args.start;
                dp.update();
            };
            nav.init();

            var dp = new DayPilot.Calendar("dp");
            dp.startDate = "{{ start_date }}";
            dp.viewType = "Days";
            dp.days = 2;
            dp.businessBeginsHour = 7;
            dp.events.list = [];
            {% for e in events %}
                var e = {
                    start: new DayPilot.Date("{{ e.0 }}"),
                    end: new DayPilot.Date("{{ e.1 }}"),
                    id: DayPilot.guid(),
                    text: "{{ e.2 }},\
                group: {{ e.4 }},\
                place: {{ e.3 }}",
                    moveDisabled: true
                };
                dp.events.list.push(e);
            {% endfor %}

            dp.eventClickHandling = "Enabled";
            dp.eventMoveHandling = "Disabled";
            dp.onEventClicked = function (args) {
                document.getElementById("details").innerText = args.e.text();
            };

            dp.init();
        </script>

    {% endif %}
</div>

</body>
</html>

